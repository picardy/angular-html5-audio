{"version":3,"file":"angular-html5-audio.min.js","sources":["angular-html5-audio.js"],"names":["root","factory","define","amd","exports","module","require","angular","this","BufferUtils","amplify","buffer","factor","map","sample","decibels","rmsValue","rms","Math","log","downsample","size","newBuffer","i","length","push","filter","inputBuffer","outputBuffer","filterFunction","chan","numberOfChannels","inputChannel","getChannelData","outputChannel","idx","sumOfSquares","reduce","s","x","sqrt","AudioContextService","HTML5AudioFeatures","HTML5AudioProcess","Context","options","setupContext","PROCESSOR_SAMPLE_SIZE","processors","stream","setStream","prototype","context","AudioContext","destination","sampleRate","source","createMediaStreamSource","createProcessor","name","hasOwnProperty","createProcess","extend","createContext","AudioFeatures","window","webkitAudioContext","mozAudioContext","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","getUserMedia","navigator","webkitGetUserMedia","mozGetUserMedia","bind","supported","AudioMicService","$q","Mic","streaming","waiting","start","d","defer","mic","resolve","audio","err","reject","promise","stop","createMic","AudioProcesService","Process","initialize","process","input","output","setContext","apply","arguments","connect","setupProcessor","processor","createScriptProcessor","onaudioprocess","disconnect","app","service"],"mappings":"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"}